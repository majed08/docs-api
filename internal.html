
<!doctype html>
<html lang="fa">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>مستندات API داخلی نوبیتکس</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-f47d16a4.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-5c68d5d9.css" rel="stylesheet" media="print" />
    <link href="stylesheets/custom-1213ed84.css" rel="stylesheet" />
      <script src="javascripts/all_nosearch-18c3ed8e.js"></script>

  </head>

  <body class="internal" data-languages="[&quot;shell&quot;,&quot;javascript&quot;,&quot;java&quot;,&quot;swift&quot;,&quot;plaintext&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-900dbdd3.png" class="logo" alt="" />
      <html lang="fa">
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="java">java</a>
              <a href="#" data-language-name="swift">swift</a>
              <a href="#" data-language-name="plaintext">plaintext</a>
        </div>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="مستندات API داخلی نوبیتکس">مستندات API داخلی نوبیتکس</a>
          </li>
          <li>
            <a href="#a68e7d7c2f" class="toc-h1 toc-link" data-title="شناسایی دوعاملی">شناسایی دوعاملی</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#42abd66a01" class="toc-h2 toc-link" data-title="فعال‌سازی شناسایی دوعاملی">فعال‌سازی شناسایی دوعاملی</a>
                  </li>
                  <li>
                    <a href="#5172077f3e" class="toc-h2 toc-link" data-title="تایید شناسایی دوعاملی">تایید شناسایی دوعاملی</a>
                  </li>
                  <li>
                    <a href="#508568a81e" class="toc-h2 toc-link" data-title="غیرفعال‌سازی شناسایی دوعاملی">غیرفعال‌سازی شناسایی دوعاملی</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#46db07baca" class="toc-h1 toc-link" data-title="اعلان‌های کاربر">اعلان‌های کاربر</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#0d86819db0" class="toc-h2 toc-link" data-title="لیست اعلانات">لیست اعلانات</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#44f2212779" class="toc-h1 toc-link" data-title="صورت‌حساب کیف پول">صورت‌حساب کیف پول</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#358c896780" class="toc-h2 toc-link" data-title="ایجاد صورت‌حساب واریز">ایجاد صورت‌حساب واریز</a>
                  </li>
                  <li>
                    <a href="#58c134cc87" class="toc-h2 toc-link" data-title="تفسیر صورت‌حساب">تفسیر صورت‌حساب</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#d883788cf3" class="toc-h1 toc-link" data-title="اعلان‌های قیمت">اعلان‌های قیمت</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#bf717f8c37" class="toc-h2 toc-link" data-title="لیست اعلان‌های قیمت">لیست اعلان‌های قیمت</a>
                  </li>
                  <li>
                    <a href="#29ffe8c326" class="toc-h2 toc-link" data-title="ایجاد اعلان قیمت">ایجاد اعلان قیمت</a>
                  </li>
                  <li>
                    <a href="#b3bf2b7e3a" class="toc-h2 toc-link" data-title="ویرایش اعلان قیمت">ویرایش اعلان قیمت</a>
                  </li>
                  <li>
                    <a href="#abca11cae8" class="toc-h2 toc-link" data-title="حذف اعلان قیمت">حذف اعلان قیمت</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#c6414d8cc5" class="toc-h1 toc-link" data-title="صرافی">صرافی</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#dd0b697e3e" class="toc-h2 toc-link" data-title="تخمین قیمت معامله">تخمین قیمت معامله</a>
                  </li>
                  <li>
                    <a href="#106c4fb05b" class="toc-h2 toc-link" data-title="ثبت معامله">ثبت معامله</a>
                  </li>
                  <li>
                    <a href="#3fe8d57657" class="toc-h2 toc-link" data-title="لیست معاملات">لیست معاملات</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#f719db164f" class="toc-h1 toc-link" data-title="تراکنش‌های مالی">تراکنش‌های مالی</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#c0e10167ee" class="toc-h2 toc-link" data-title="تاریخچه تراکنش‌ها">تاریخچه تراکنش‌ها</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#591570d949" class="toc-h1 toc-link" data-title="گیفت کارت">گیفت کارت</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#ad0b7a2c5e" class="toc-h2 toc-link" data-title="ایجاد هدیه">ایجاد هدیه</a>
                  </li>
                  <li>
                    <a href="#1ecce8f7b9" class="toc-h2 toc-link" data-title="تایید برداشت">تایید برداشت</a>
                  </li>
                  <li>
                    <a href="#56e3cb5859" class="toc-h2 toc-link" data-title="لندینگ هدیه">لندینگ هدیه</a>
                  </li>
                  <li>
                    <a href="#3d9594a87d" class="toc-h2 toc-link" data-title="دریافت هدیه‌ برای کاربران عضو">دریافت هدیه‌ برای کاربران عضو</a>
                  </li>
                  <li>
                    <a href="#lightning" class="toc-h2 toc-link" data-title="دریافت هدیه‌ی lightning برای کاربران غیر عضو">دریافت هدیه‌ی lightning برای کاربران غیر عضو</a>
                  </li>
                  <li>
                    <a href="#f62370d40a" class="toc-h2 toc-link" data-title="لیست کارت‌های هدیه‌ی کاربر">لیست کارت‌های هدیه‌ی کاربر</a>
                  </li>
                  <li>
                    <a href="#d6f322bb99" class="toc-h2 toc-link" data-title="ایجاد درخواست تعداد بالای هدیه">ایجاد درخواست تعداد بالای هدیه</a>
                  </li>
                  <li>
                    <a href="#aa1c6bb46c" class="toc-h2 toc-link" data-title="تایید درخواست تعداد بالای هدیه">تایید درخواست تعداد بالای هدیه</a>
                  </li>
                  <li>
                    <a href="#3ff731b9c9" class="toc-h2 toc-link" data-title="ارسال مجدد رمزیکبار مصرف">ارسال مجدد رمزیکبار مصرف</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://nobitex.ir/'>سایت نوبیتکس</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='api'>مستندات API داخلی نوبیتکس</h1>
<blockquote>
<p>جهت استفاده از نمونه کدهای مستند ابتدا تنظیمات زیر را استفاده نمایید.</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="nb">sudo </span>apt <span class="nb">install </span>curl
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="na">baseURL</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.nobitex.ir</span><span class="dl">"</span><span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">com.google.gson.JsonObject</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">retrofit2.Call</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">retrofit2.http.GET</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">retrofit2.http.POST</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">retrofit2.http.Headers</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">retrofit2.http.Query</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">retrofit2.http.Field</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">retrofit2.http.FormUrlEncoded</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">retrofit2.converter.gson.GsonConverterFactory</span><span class="o">;</span>

<span class="nc">Retrofit</span> <span class="n">retrofit</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Retrofit</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
  <span class="o">.</span><span class="na">baseUrl</span><span class="o">(</span><span class="err">'</span><span class="nl">https:</span><span class="c1">//api.nobitex.ir')</span>
  <span class="o">.</span><span class="na">addConverterFactory</span><span class="o">(</span><span class="nc">GsonConverterFactory</span><span class="o">.</span><span class="na">create</span><span class="o">())</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div>
<p>مستندات این بخش، سایر APIهای نوبیتکس را که عموما با بازار نوبیتکس ارتباطی نداشته و بیشتر ناظر به نیازهای ارتباطی و عملکردی سایت و اپلیکیشن نوبیتکس می‌باشد، توضیح می‌دهد.</p>

<p>توجه داشته باشید بعضی از APIها نیاز به احراز هویت و دریافت توکن دارد که می‌توانید از <a href="/#intro-auth">مستندات احراز هویت</a> نحوه عملکرد آن را مطالعه کنید.</p>
<h1 id='a68e7d7c2f'>شناسایی دوعاملی</h1>
<p>شناسایی دوعاملی جهت افزایش امنیت حساب و دارایی کاربر در زمان ورود، علاوه بر گذرواژه، یک کد شش رقمی تقاضا خواهد نمود که از <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2" title="Google Authenticator">احرازگر گوگل</a> دریافت می‌شود.</p>

<aside class="notice">
فعالسازی شناسایی دو عاملی برای کاربران سطح دو نوبیتکس اجباری است.
</aside>

<aside class="notice">
احراز هویت در API های این مجموعه الزامی است.
</aside>
<h2 id='42abd66a01'>فعال‌سازی شناسایی دوعاملی</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.nobitex.ir/users/tfa/request'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/users/tfa/request</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Token yourTOKENhereHEX0000000000</span><span class="dl">"</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@GET</span><span class="o">(</span><span class="s">"/users/tfa/request"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">request2FA</span><span class="o">();</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">request2FA</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>GET /users/tfa/request HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"device"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"App"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"configUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"otpauth://totp/Nobitex%3Atest%40nobitex.net?secret=FXZJ28P2V3U0F4W3U7707EYIKNBJAKR6&amp;algorithm=SHA1&amp;digits=6&amp;period=30&amp;issuer=Nobitex"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای فعال‌سازی شناسایی دوعاملی از این نوع درخواست استفاده نمایید:</p>

<ul>
<li>آدرس: <code>GET /users/tfa/request</code></li>
</ul>

<aside class="notice">
کاربر درخواست دهنده بایستی شماره تماس و ایمیل تایید شده در نوبیتکس داشته باشد.
</aside>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>device</td>
<td>TOTPDevice</td>
<td>اطلاعات تنظیم دستگاه</td>
<td>{&quot;id&quot;: 1, ...}</td>
</tr>
</tbody></table>
<h3 id='totpdevice'>شی TOTPDevice</h3>
<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>شناسه دستگاه</td>
<td>1</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>نام دستگاه</td>
<td>&quot;App&quot;</td>
</tr>
<tr>
<td>confirmed</td>
<td>boolean</td>
<td>تایید شده با پیامک</td>
<td>false</td>
</tr>
<tr>
<td>configUrl</td>
<td>string</td>
<td>آدرس تنظیم شناسایی دوعاملی در احرازگر گوگل</td>
<td><span class="long">&quot;otpauth://totp/Nobitex%3Atest%40nobitex.net?secret=FXZJ28P2V3U0F4W3U7707EYIKNBJAKR6&amp;algorithm=SHA1&amp;digits=6&amp;period=30&amp;issuer=Nobitex&quot;</span></td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 3 درخواست در 10 دقیقه / 10 درخواست در ساعت
</aside>

<aside class="notice">
پس از ثبت درخواست، پیامکی حاوی کد شش رقمی جهت تایید دستگاه به شماره همراه کاربر ارسال می‌شود که ظرف مدت 30 دقیقه منقضی خواهد شد.
</aside>

<ul>
<li>حالت‌های خطا</li>
</ul>

<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>UnverifiedMobile</td>
<td>کاربر شماره تماس یا ایمیل تایید شده ندارد.</td>
</tr>
</tbody></table>

<p>کاربر با خروجی این API می‌تواند برنامه احرازگر گوگل را فعال نماید. این برنامه هر 30 ثانیه یک بار کد جدیدی تولید می‌کند که تا دو دقیقه قابل استفاده است.
در صورت تنظیم درست احرازگر گوگل می‌توانید برای تایید دستگاه (device) و تکمیل درخواست خود اقدام کنید.</p>
<h2 id='5172077f3e'>تایید شناسایی دوعاملی</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/users/tfa/confirm'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"device": 1, "otp": 123456, "sms_otp": 987654}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/users/tfa/confirm</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">device</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">otp</span><span class="p">:</span> <span class="mi">123456</span><span class="p">,</span> <span class="na">sms_otp</span><span class="p">:</span> <span class="mi">987654</span><span class="p">},</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Token yourTOKENhereHEX0000000000</span><span class="dl">"</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@FormUrlEncoded</span>
  <span class="nd">@POST</span><span class="o">(</span><span class="s">"/users/tfa/confirm"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">confirm2FA</span><span class="o">(</span><span class="nd">@Field</span><span class="o">(</span><span class="s">"device"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">deviceId</span><span class="o">,</span> <span class="nd">@Field</span><span class="o">(</span><span class="s">"otp"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">otp</span><span class="o">,</span> <span class="nd">@Field</span><span class="o">(</span><span class="s">"sms_otp"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">smsOtp</span><span class="o">);</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">confirm2FA</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">123456</span><span class="o">,</span> <span class="mi">987654</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>POST /users/tfa/confirm HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
{"device": 1, "otp": 123456, "sms_otp": 987654}
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>پس از تنظیم شناسایی دوعاملی در احرازگر گوگل و دریافت پیامک کد تایید، برای تکمیل درخواست خود از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>POST /users/tfa/confirm</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>device</td>
<td>integer</td>
<td>الزامی</td>
<td>شناسه دستگاهی که فعال‌سازی شناسایی دوعاملی را درخواست کرده</td>
<td>1</td>
</tr>
<tr>
<td>otp</td>
<td>integer</td>
<td>الزامی</td>
<td>رمز یکبارمصرف شش رقمی دریافت شده از احرازگر گوگل</td>
<td>123456</td>
</tr>
<tr>
<td>sms_otp</td>
<td>integer</td>
<td>الزامی</td>
<td>کد تایید شش رقمی پیامک شده به شماره همراه کاربر</td>
<td>987654</td>
</tr>
</tbody></table>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 10 درخواست در 10 دقیقه / 20 درخواست در ساعت
</aside>

<aside class="notice">
در صورت اشتباه وارد کردن رمز یکبارمصرف احرازگر گوگل، برای درخواست بعدی با توجه به دفعات اشتباه بایستی به ترتیب 1، 2، 4، 8 و ... ثانیه پیش از درخواست مجدد صبر کنید.
</aside>

<aside class="notice">
حداکثر یک دستگاه دارای شناسایی دوعاملی فعال در هر لحظه برای کاربر مجاز است و در صورت فعال‌سازی دستگاه دیگر، دستگاه قبلی غیر فعال خواهد شد.
</aside>

<ul>
<li>حالت‌های خطا</li>
</ul>

<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>InvalidOTP</td>
<td>رمز یکبارمصرف نامعتبر است یا زمان لازم برای انتظار پس از ورود اشتباه رمز سپری نشده است.</td>
</tr>
<tr>
<td>MissingSmsOTP</td>
<td>کد تایید پیامک شده ارسال نشده است.</td>
</tr>
<tr>
<td>InvalidSmsOTP</td>
<td>کد تایید پیامک شده منقضی یا نامعتبر است.</td>
</tr>
</tbody></table>
<h2 id='508568a81e'>غیرفعال‌سازی شناسایی دوعاملی</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/users/tfa/disable'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"otp": 123456}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/users/tfa/disable</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">otp</span><span class="p">:</span> <span class="mi">123456</span><span class="p">},</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Token yourTOKENhereHEX0000000000</span><span class="dl">"</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@FormUrlEncoded</span>
  <span class="nd">@POST</span><span class="o">(</span><span class="s">"/users/tfa/disable"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">disable2FA</span><span class="o">(</span><span class="nd">@Field</span><span class="o">(</span><span class="s">"otp"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">otp</span><span class="o">);</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">disable2FA</span><span class="o">(</span><span class="mi">123456</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>POST /users/tfa/disable HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
{"otp": 123456}
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای غیرفعال‌سازی شناسایی دوعاملی از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>POST /users/tfa/disable</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>otp</td>
<td>integer</td>
<td>الزامی</td>
<td>رمز یکبارمصرف شش رقمی دریافت شده از احرازگر گوگل</td>
<td>123456</td>
</tr>
</tbody></table>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
</tbody></table>

<aside class="notice">
در صورت اشتباه وارد کردن رمز یکبارمصرف احرازگر گوگل، برای درخواست بعدی با توجه به دفعات اشتباه بایستی به ترتیب 1، 2، 4، 8 و ... ثانیه پیش از درخواست مجدد صبر کنید.
</aside>

<ul>
<li>حالت‌های خطا</li>
</ul>

<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>InvalidOTP</td>
<td>رمز یکبارمصرف نامعتبر است یا زمان لازم برای انتظار پس از ورود اشتباه رمز سپری نشده است.</td>
</tr>
</tbody></table>
<h1 id='46db07baca'>اعلان‌های کاربر</h1>
<p>این اعلانات برای اطلاع‌رسانی به کاربر از سوی نوبیتکس ارسال می‌شود و در بخش اعلانات سایت و اپلیکیشن به نمایش در می‌آید.</p>

<aside class="notice">
احراز هویت در API های این مجموعه الزامی است.
</aside>
<h2 id='0d86819db0'>لیست اعلانات</h2>
<blockquote>
<p>نمونه درخواست: </p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.nobitex.ir/notifications/list'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/notifications/list</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token yourTOKENhereHEX0000000000</span><span class="dl">'</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@GET</span><span class="o">(</span><span class="s">"/notifications/list"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">listNotifications</span><span class="o">();</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">listNotifications</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>GET /notifications/list HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"notifications"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"به نوبیتکس خوش آمدید!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-10-04T13:19:46.103353+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"read"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای دریافت اعلانات کاربر از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>GET /notifications/list</code></p></li>
<li><p>پارامترهای پاسخ:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>notifications</td>
<td>list of Notification</td>
<td>لیستی از اعلان‌ها</td>
<td>[]</td>
</tr>
</tbody></table>

<p>شی Notification</p>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>شناسه اعلان</td>
<td>1</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>متن پیام</td>
<td>&quot;به نوبیتکس خوش آمدید!&quot;</td>
</tr>
<tr>
<td>createdAt</td>
<td>iso-string</td>
<td>زمان ایجاد</td>
<td>&quot;2021-10-04T13:19:46.103353+00:00&quot;</td>
</tr>
<tr>
<td>read</td>
<td>boolean</td>
<td>خوانده شده</td>
<td>false</td>
</tr>
</tbody></table>
<h1 id='44f2212779'>صورت‌حساب کیف پول</h1>
<p>صورت‌حساب یا فاکتور (invoice) برای دریافت رمزارز در برخی شبکه‌های انتقال استفاده می‌شود.
برای آشنایی با مفاهیم مرتبط با انتقال صورت‌حسابی
<a href="https://blog.nobitex.ir/لایتنینگ-چیست-و-چطور-از-آن-استفاده-کنیم/" title="لایتنینگ چیست و چطور از آن استفاده کنیم؟">مطلب آموزشی بلاگ</a>
را مطالعه نمایید.</p>

<aside class="notice">
در حال حاضر تنها برای کیف پول بیت‌کوین از طریق شبکه لایتنینگ انتقال صورت‌حسابی امکان‌پذیر است.
</aside>

<aside class="notice">
احراز هویت در API های این مجموعه الزامی است.
</aside>
<h2 id='358c896780'>ایجاد صورت‌حساب واریز</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/users/wallets/invoice/generate'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"wallet": 1, "amount": 100}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/users/wallets/invoice/generate</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">wallet</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Token yourTOKENhereHEX0000000000</span><span class="dl">"</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@FormUrlEncoded</span>
  <span class="nd">@POST</span><span class="o">(</span><span class="s">"/users/wallets/invoice/generate"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">generateWalletInvoice</span><span class="o">(</span><span class="nd">@Field</span><span class="o">(</span><span class="s">"wallet"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">walletId</span><span class="o">,</span> <span class="nd">@Field</span><span class="o">(</span><span class="s">"amount"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">amount</span><span class="o">);</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">generateWalletInvoice</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">100</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>POST /users/wallets/invoice/generate HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
Content-Type: application/json
{"wallet": 1, "amount": 100}
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"deposit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0000010000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-10-17T18:52:31.679312+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"depositType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coinDeposit"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0000010000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deposit - address:tbtctest2o21q2ufulqrp85wt6qnxzxgmkd72hgc2du, tx:0001020304050607080900010203040506070809000102030405060708090102"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-10-17T18:52:31.679312+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"txHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001020304050607080900010203040506070809000102030405060708090102"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456789</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitcoin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockchainUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hash: 0001020304050607080900010203040506070809000102030405060708090102"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"requiredConfirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"isConfirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnbc1u1pskcu80pp5qqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqypqdqcfehky6t5v4uzqer9wphhx6t5z7jut6xdcvpnye3suzk448rqex822kr788q8hxrgtw8muxmnnj4jfj074lgh7czwf8k3wdx3u8y46znnxeqg0e6gqmc57rpw3qnyl7gpnaaqru"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expired"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>برای ایجاد صورت‌حساب واریز از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>POST /users/wallets/invoice/generate</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>wallet</td>
<td>integer</td>
<td>الزامی</td>
<td>شناسه کیف‌پول کاربر برای رمزارز واریز شده</td>
<td>1</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>الزامی</td>
<td>مقدار رمزارز واریز شده</td>
<td>100</td>
</tr>
</tbody></table>

<aside class="notice">
واحد amount برای رمزارز بیت‌کوین در این درخواست معادل
<a href="https://blog.nobitex.ir/glossary/satoshi/">ساتوشی</a>
می‌باشد.
</aside>

<aside class="notice">
در حال حاضر، حداقل واریز 100 ساتوشی و حداکثر واریز 100000 ساتوشی در نظر گرفته شده است.
</aside>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>deposit</td>
<td>CoinDeposit</td>
<td>اطلاعات واریز</td>
<td>{&quot;id&quot;: 1, ...}</td>
</tr>
</tbody></table>
<h3 id='deposit'>شی Deposit</h3>
<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>شناسه واریز</td>
<td>1</td>
</tr>
<tr>
<td>amount</td>
<td>monetary</td>
<td>مقدار واریز شده</td>
<td>&quot;0.0000010000&quot;</td>
</tr>
<tr>
<td>date</td>
<td>iso-string</td>
<td>زمان واریز</td>
<td>&quot;2021-10-17T18:52:31.679312+00:00&quot;</td>
</tr>
<tr>
<td>depositType</td>
<td>string</td>
<td>شناسه واریز</td>
<td>1</td>
</tr>
<tr>
<td>confirmed</td>
<td>boolean</td>
<td>تایید شده در نوبیتکس</td>
<td>true</td>
</tr>
<tr>
<td>transaction</td>
<td>Transaction</td>
<td>اطلاعات تراکنش واریز به کیف پول</td>
<td>{&quot;id&quot;: 5, ...}</td>
</tr>
</tbody></table>
<h3 id='coindeposit-deposit-deposittype-quot-coindeposit-quot'>شی CoinDeposit (نوع Deposit با depositType = <bdi>&quot;coinDeposit&quot;</bdi>)</h3>
<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>txHash</td>
<td>string</td>
<td>هش واریز</td>
<td><span class="long">&quot;0001020304050607080900010203040506070809000102030405060708090102&quot;</span></td>
</tr>
<tr>
<td>address</td>
<td>string</td>
<td>آدرس یا تگ واریز</td>
<td>123456789</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>رمزارز واریزی</td>
<td>&quot;Bitcoin&quot;</td>
</tr>
<tr>
<td>blockchainUrl</td>
<td>integer</td>
<td>شناسه واریز</td>
<td><span class="long">&quot;hash: 0001020304050607080900010203040506070809000102030405060708090102&quot;</span></td>
</tr>
<tr>
<td>requiredConfirmations</td>
<td>integer</td>
<td>تعداد تاییدهای مورد نیاز</td>
<td>3</td>
</tr>
<tr>
<td>confirmations</td>
<td>integer</td>
<td>تعداد تاییدهای دریافت شده</td>
<td>2</td>
</tr>
<tr>
<td>isConfirmed</td>
<td>boolean</td>
<td>تایید شده در شبکه رمزارزی</td>
<td>false</td>
</tr>
<tr>
<td>invoice</td>
<td>string</td>
<td>صورت‌حساب واریز</td>
<td><span class="long">&quot;lnbc1u1pskcu80pp5qqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqypqdqcfehky6t5v4uzqer9wphhx6t5z7jut6xdcvpnye3suzk448rqex822kr788q8hxrgtw8muxmnnj4jfj074lgh7czwf8k3wdx3u8y46znnxeqg0e6gqmc57rpw3qnyl7gpnaaqru&quot;</span></td>
</tr>
<tr>
<td>expired</td>
<td>boolean</td>
<td>منقضی شده</td>
<td>false</td>
</tr>
</tbody></table>
<h3 id='transaction'>شی Transaction</h3>
<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>شناسه تراکنش</td>
<td>5</td>
</tr>
<tr>
<td>amount</td>
<td>monetary</td>
<td>مقدار تراکنش</td>
<td>&quot;0.0000010000&quot;</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>رمزارز تراکنش</td>
<td>&quot;btc&quot;</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>توضیح تراکنش</td>
<td>&quot;Deposit - address:tbtctest2o21q2ufulqrp85wt6qnxzxgmkd72hgc2du, tx:0001020304050607080900010203040506070809000102030405060708090102&quot;</td>
</tr>
<tr>
<td>created_at</td>
<td>iso-string</td>
<td>زمان تراکنش</td>
<td>&quot;2021-10-17T18:52:31.679312+00:00&quot;</td>
</tr>
<tr>
<td>balance</td>
<td>integer</td>
<td>موجودی نهایی کیف پول</td>
<td>null</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 10 درخواست در 3 دقیقه
</aside>

<aside class="warning">
کاربر درخواست دهنده در این API بایستی حداقل سطح مجاز برای واریز رمزارز (سطح یک) را داشته باشد.
</aside>

<ul>
<li>حالت‌های خطا</li>
</ul>

<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>CoinDepositLimitation</td>
<td>کاربر اجازه واریز رمزارز در نوبیتکس را ندارد.</td>
</tr>
<tr>
<td>InvalidAmount</td>
<td>مقدار تراکنش در بازه مجاز نیست.</td>
</tr>
<tr>
<td>InvalidCurrency</td>
<td>رمزارز کیف‌پول درخواست از انتقال صورت‌حسابی پشتیبانی نمی‌کند.</td>
</tr>
<tr>
<td>CoinDepositDisabled</td>
<td>امکان واریز رمزارز در این شبکه به طور مقطعی توسط مدیر سیستم غیر فعال شده است.</td>
</tr>
<tr>
<td>NotAvailable</td>
<td>دسترسی به شبکه برای ساخت صورت‌حساب به دلیل اختلالات در اتصال به صورت موقت وجود ندارد.</td>
</tr>
<tr>
<td>ParseError</td>
<td>نوع یا شرط الزامی بودن یکی از پارامترهای ورودی رعایت نشده است.</td>
</tr>
</tbody></table>
<h2 id='58c134cc87'>تفسیر صورت‌حساب</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/users/wallets/invoice/decode'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"wallet": 1,"invoice": "lnbc1u1pskcu80pp5qqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqypqdqcfehky6t5v4uzqer9wphhx6t5z7jut6xdcvpnye3suzk448rqex822kr788q8hxrgtw8muxmnnj4jfj074lgh7czwf8k3wdx3u8y46znnxeqg0e6gqmc57rpw3qnyl7gpnaaqru"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/users/wallets/invoice/decode</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">wallet</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">invoice</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lnbc1u1pskcu80pp5qqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqypqdqcfehky6t5v4uzqer9wphhx6t5z7jut6xdcvpnye3suzk448rqex822kr788q8hxrgtw8muxmnnj4jfj074lgh7czwf8k3wdx3u8y46znnxeqg0e6gqmc57rpw3qnyl7gpnaaqru</span><span class="dl">'</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token yourTOKENhereHEX0000000000</span><span class="dl">'</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@FormUrlEncoded</span>
  <span class="nd">@POST</span><span class="o">(</span><span class="s">"/users/wallets/invoice/decode"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">decodeWalletInvoice</span><span class="o">(</span><span class="nd">@Field</span><span class="o">(</span><span class="s">"wallet"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">walletId</span><span class="o">,</span> <span class="nd">@Field</span><span class="o">(</span><span class="s">"invoice"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">invoice</span><span class="o">);</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">String</span> <span class="n">invoice</span> <span class="o">=</span> <span class="s">"lnbc1u1pskcu80pp5qqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqypqdqcfehky6t5v4uzqer9wphhx6t5z7jut6xdcvpnye3suzk448rqex822kr788q8hxrgtw8muxmnnj4jfj074lgh7czwf8k3wdx3u8y46znnxeqg0e6gqmc57rpw3qnyl7gpnaaqru"</span><span class="o">;</span>
<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">decodeWalletInvoice</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">invoice</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>POST /users/wallets/invoice/decode HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
Content-Type: application/json
{"wallet": 1, "invoice": "lnbc1u1pskcu80pp5qqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqypqdqcfehky6t5v4uzqer9wphhx6t5z7jut6xdcvpnye3suzk448rqex822kr788q8hxrgtw8muxmnnj4jfj074lgh7czwf8k3wdx3u8y46znnxeqg0e6gqmc57rpw3qnyl7gpnaaqru"}
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03e7156ae33b0a208d0744199163177e909e80176e55d97a2f221ede0f934dd9ad"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634496751</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000010"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای استخراج مقادیر موجود در صورت‌حساب رمزگذاری شده از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>POST /users/wallets/invoice/decode</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>wallet</td>
<td>integer</td>
<td>الزامی</td>
<td>شناسه کیف‌پول کاربر که صورت‌حساب برای آن صادر شده</td>
<td>1</td>
</tr>
<tr>
<td>invoice</td>
<td>string</td>
<td>الزامی</td>
<td>صورت‌حساب کد شده</td>
<td><span class="long">&quot;lnbc1u1pskcu80pp5qqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqypqdqcfehky6t5v4uzqer9wphhx6t5z7jut6xdcvpnye3suzk448rqex822kr788q8hxrgtw8muxmnnj4jfj074lgh7czwf8k3wdx3u8y46znnxeqg0e6gqmc57rpw3qnyl7gpnaaqru&quot;</span></td>
</tr>
</tbody></table>

<blockquote>
<p>نمونه صورت‌حساب آزمایشی:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"lntb1u1pskcu80pp5qqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqqqsyqcyq5rqwzqfqypqdqcfehky6t5v4uzqer9wphhx6t5wtu3ws8aua895ruar4kw2ps6vrc4cj2nrsyms6t5n8q38rrpw6nqnus2fen69uwyzru2m65qxvvezmw6y8pxqz9qg3px6jldq40smpgp05rvjk"</span><span class="w">
</span></code></pre></div>
<aside class="notice">
دقت نمایید صورت‌حساب ثبت شده نمی‌تواند مربوط به شبکه‌های آزمایشی رمزارز باشد. برای تفسیر صورت‌حساب‌های آزمایشی از محیط آزمایشی نوبیتکس استفاده نمایید.
</aside>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>amount</td>
<td>monetary</td>
<td>مقدار صورت‌حساب</td>
<td>&quot;0.000001&quot;</td>
</tr>
<tr>
<td>date</td>
<td>int</td>
<td>زمان ایجاد صورت‌حساب</td>
<td>1634496751</td>
</tr>
<tr>
<td>address</td>
<td>string</td>
<td>کلید عمومی پرداخت کننده</td>
<td><span class="long">&quot;03e7156ae33b0a208d0744199163177e909e80176e55d97a2f221ede0f934dd9ad&quot;</span></td>
</tr>
<tr>
<td>fee</td>
<td>monetary</td>
<td>کارمزد انتقال</td>
<td>&quot;0.00000010&quot;</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 60 درخواست در 2 دقیقه
</aside>

<ul>
<li>حالت‌های خطا</li>
</ul>

<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>InvalidInvoice</td>
<td><p>صورت‌حساب نامعتبر است یا پشتیبانی نمی‌شود</p></td>
</tr>
</tbody></table>
<h1 id='d883788cf3'>اعلان‌های قیمت</h1>
<p>کاربر می‌تواند رسیدن قیمت در یک بازار به یک قیمت دلخواه و عبور از آن را به کمک این اعلان پایش کند.
به محض گذر از قیمت تعیین شده، به کاربر از طرقی که مشخص کرده اطلاع‌رسانی خواهد شد.
مخاطب این امکان کاربران هستند و استفاده از آن به بات‌ها پیشنهاد نمی‌شود.</p>

<aside class="notice">
احراز هویت در API های این مجموعه الزامی است.
</aside>
<h2 id='bf717f8c37'>لیست اعلان‌های قیمت</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.nobitex.ir/v2/price-alerts'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/v2/price-alerts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token yourTOKENhereHEX0000000000</span><span class="dl">'</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@GET</span><span class="o">(</span><span class="s">"/v2/price-alerts"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">listPriceAlerts</span><span class="o">();</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">listPriceAlerts</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>GET /v2/price-alerts HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-08T22:52:59.193208+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Price"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65000.0000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"As a test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notif"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-08T22:59:58.383443+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Price"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62000.0000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email/Notif"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای دریافت اعلان‌های قیمت کاربر از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>GET /v2/price-alerts</code></p></li>
<li><p>پارامترهای پاسخ:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>alerts</td>
<td>list of PriceAlert</td>
<td>لیست اعلان‌های قیمت کاربر</td>
<td>[]</td>
</tr>
</tbody></table>
<h3 id='pricealert'>شی PriceAlert</h3>
<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>شناسه اعلان</td>
<td>1</td>
</tr>
<tr>
<td>createdAt</td>
<td>iso-string</td>
<td>زمان ایجاد</td>
<td>&quot;2021-10-04T13:19:46.103353+00:00&quot;</td>
</tr>
<tr>
<td>market</td>
<td>string</td>
<td>بازار مورد نظر</td>
<td>&quot;BTCUSDT&quot;</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>نوع اعلان<sup>1</sup></td>
<td>&quot;Price&quot;</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>جهت تغییر بازار<sup>2</sup></td>
<td>&quot;+&quot;</td>
</tr>
<tr>
<td>price</td>
<td>monetary</td>
<td>قیمت مورد نظر</td>
<td>&quot;65000.0000000000&quot;</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>توضیحات</td>
<td>&quot;&quot;</td>
</tr>
<tr>
<td>channel</td>
<td>string</td>
<td>کانال اطلاع‌رسانی<sup>3</sup></td>
<td>&quot;Email/Notif&quot;</td>
</tr>
</tbody></table>

<ol>
<li><strong>نوع اعلان:</strong> در حال حاضر تنها می‌تواند Price باشد. اعلان نوع Price برای پایش رسیدن به یک قیمت مشخص به‌کار می‌رود.</li>
<li><strong>جهت تغییر بازار:</strong> می‌تواند دو مقدار + یا - داشته باشد. جهت + یعنی اعلان در صورت بیشتر شدن قیمت بازار از قیمت تعیین شده فعال می‌شود و جهت - یعنی در صورت پایین تر آمدن قیمت بازار تا قیمت تعیین شده، اعلان فعال و ارسال خواهد شد.</li>
<li><strong>کانال اطلاع‌رسانی:</strong> می‌تواند هر یک از کانال‌های نوتیفیکیشن (Notif)، ایمیل (Email) یا پیامک (SMS) و یا ترکیبی از آن‌ها باشد. (کانال پیامک در آینده پشتیبانی خواهد شد و در حال حاضر غیرفعال است.)</li>
</ol>

<aside class="notice">
محدودیت فراخوانی : 25 درخواست در 5 دقیقه
</aside>
<h2 id='29ffe8c326'>ایجاد اعلان قیمت</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/v2/price-alerts'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"tp": "price", "market": "btcusdt", "direction": "-", "price": "63000", "channel": "email,notif"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/v2/price-alerts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">tp</span><span class="p">:</span> <span class="dl">'</span><span class="s1">price</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">market</span><span class="p">:</span> <span class="dl">'</span><span class="s1">btcusdt</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">direction</span><span class="p">:</span> <span class="dl">'</span><span class="s1">-</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">price</span><span class="p">:</span> <span class="dl">'</span><span class="s1">63000</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">email,notif</span><span class="dl">'</span><span class="p">,</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token yourTOKENhereHEX0000000000</span><span class="dl">'</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@FormUrlEncoded</span>
  <span class="nd">@POST</span><span class="o">(</span><span class="s">"/v2/price-alerts"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">createPriceAlert</span><span class="o">(</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"tp"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">alertType</span><span class="o">,</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"market"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">market</span><span class="o">,</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"direction"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">direction</span><span class="o">,</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"price"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">price</span><span class="o">,</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"channel"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">channel</span><span class="o">,</span>
  <span class="o">);</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">createPriceAlert</span><span class="o">(</span><span class="s">"price"</span><span class="o">,</span> <span class="s">"btcusdt"</span><span class="o">,</span> <span class="s">"-"</span><span class="o">,</span> <span class="s">"63000"</span><span class="o">,</span> <span class="s">"email,notif"</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>POST /v2/price-alerts HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
Content-Type: application/json
{"tp": "price", "market": "btcusdt", "direction": "-", "price": "63000", "channel": "email,notif"}
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alert"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-10T20:07:07.977328+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Price"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63000.0000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email/Notif"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای ایجاد یک اعلان قیمت از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>POST /v2/price-alerts</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>الزامی</td>
<td>نوع اعلان</td>
<td>&quot;price&quot;</td>
</tr>
<tr>
<td>market</td>
<td>string</td>
<td>الزامی</td>
<td>بازار مورد نظر</td>
<td>&quot;BTCUSDT&quot;</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>الزامی</td>
<td>جهت تغییر بازار<sup>1</sup></td>
<td>&quot;-&quot;</td>
</tr>
<tr>
<td>price</td>
<td>monetary</td>
<td>الزامی</td>
<td>قیمت مورد نظر</td>
<td>&quot;63000&quot;</td>
</tr>
<tr>
<td>channel</td>
<td>string</td>
<td>الزامی</td>
<td>کانال اطلاع‌رسانی<sup>2</sup></td>
<td>&quot;email,notif&quot;</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>اختیاری</td>
<td>توضیحات</td>
<td>&quot;sample description&quot;</td>
</tr>
</tbody></table>

<ol>
<li><strong>جهت تغییر بازار:</strong> دو علامت + و - قابل قبول است.</li>
<li><strong>کانال‌های اطلاع‌رسانی:</strong> شامل email ,notif, sms می‌باشد که پیامک در آینده پشتیبانی خواهد شد.
جهت انتخاب چند کانال به کمک ویرگول کانال‌ها را ترکیب کنید. (مثل: <code>email,notif</code>)</li>
</ol>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>alert</td>
<td>PriceAlert</td>
<td>اعلان قیمت ایجاد شده</td>
<td>{&quot;id&quot;: 3, ...}</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 10 درخواست در 5 دقیقه
</aside>

<ul>
<li>حالت‌های خطا</li>
</ul>

<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>InvalidSymbol</td>
<td>نماد بازار (market) نامعتبر است.</td>
</tr>
<tr>
<td>ParseError</td>
<td>مقادیر ورودی‌ها از الگوی خواسته شده پیروی نمی‌کند.</td>
</tr>
<tr>
<td>ValidationError</td>
<td>ورودی‌های الزامی ارسال نشده است.</td>
</tr>
</tbody></table>
<h2 id='b3bf2b7e3a'>ویرایش اعلان قیمت</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/v2/price-alerts'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"pk": 3, "tp": "price", "market": "btcusdt", "direction": "+", "price": "64000", "channel": "notif"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/v2/price-alerts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">pk</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="na">tp</span><span class="p">:</span> <span class="dl">'</span><span class="s1">price</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">market</span><span class="p">:</span> <span class="dl">'</span><span class="s1">btcusdt</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">direction</span><span class="p">:</span> <span class="dl">'</span><span class="s1">+</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">price</span><span class="p">:</span> <span class="dl">'</span><span class="s1">64000</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">notif</span><span class="dl">'</span><span class="p">,</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token yourTOKENhereHEX0000000000</span><span class="dl">'</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@FormUrlEncoded</span>
  <span class="nd">@POST</span><span class="o">(</span><span class="s">"/v2/price-alerts"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">updatePriceAlert</span><span class="o">(</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"pk"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">alertId</span><span class="o">,</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"tp"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">alertType</span><span class="o">,</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"market"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">market</span><span class="o">,</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"direction"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">direction</span><span class="o">,</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"price"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">price</span><span class="o">,</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="s">"channel"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">channel</span><span class="o">,</span>
  <span class="o">);</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">updatePriceAlert</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="s">"price"</span><span class="o">,</span> <span class="s">"btcusdt"</span><span class="o">,</span> <span class="s">"+"</span><span class="o">,</span> <span class="s">"64000"</span><span class="o">,</span> <span class="s">"notif"</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>POST /v2/price-alerts HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
Content-Type: application/json
{"pk": 3, tp": "price", "market": "btcusdt", "direction": "-", "price": "63000", "channel": "email,notif"}
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alert"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-10T20:07:07.977328+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Price"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"64000.0000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notif"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای ویرایش یک اعلان قیمت، از درخواستی مشابه درخواست ایجاد اعلان قیمت استفاده می‌کنیم، با این تفاوت که شناسه اعلان قیمت مورد نظر نیز به پارامترهای ورودی افزوده می‌شود:</p>

<ul>
<li><p>آدرس: <code>POST /v2/price-alerts</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>pk</td>
<td>integer</td>
<td>الزامی</td>
<td>شناسه یکتای اعلان</td>
<td>3 <tr><td>...<td colspan=4>مشابه پارامترهای ورودی ایجاد اعلان قیمت</td>
</tr>
</tbody></table>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>alert</td>
<td>PriceAlert</td>
<td>اعلان قیمت به‌روز شده</td>
<td>{&quot;id&quot;: 3, ...}</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 10 درخواست در 5 دقیقه
</aside>

<ul>
<li>حالت‌های خطا

<ul>
<li>در صورتی که کاربر اعلانی با شناسه ارسال شده نداشته باشد، خطای 404 بازگردانده می‌شود.</li>
<li>سایر خطاها مشابه حالات خطا در ایجاد اعلان قیمت است.</li>
</ul></li>
</ul>
<h2 id='abca11cae8'>حذف اعلان قیمت</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="s1">'https://api.nobitex.ir/v2/price-alerts?delete_item=1,3'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/v2/price-alerts?delete_item=1,3</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token yourTOKENhereHEX0000000000</span><span class="dl">'</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@DELETE</span><span class="o">(</span><span class="s">"/v2/price-alerts"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">deletePriceAlerts</span><span class="o">(</span><span class="nd">@Query</span><span class="o">(</span><span class="s">"delete_item"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">deleteItems</span><span class="o">);</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">deletePriceAlerts</span><span class="o">(</span><span class="s">"1,3"</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>DELETE /v2/price-alerts?delete_item=1,3 HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای حذف اعلان‌های قیمت خود از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>DELETE /v2/price-alerts</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>delete_item</td>
<td>string</td>
<td>الزامی</td>
<td>شناسه اعلان‌های قیمت مدنظر حذف</td>
<td>&quot;1,3&quot;</td>
</tr>
</tbody></table>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 25 درخواست در 5 دقیقه
</aside>

<ul>
<li>حالت‌های خطا</li>
</ul>

<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>ValidationError</td>
<td>شناسه اعلان قیمتی برای حذف ارسال نشده است.</td>
</tr>
</tbody></table>
<h1 id='c6414d8cc5'>صرافی</h1>
<p>صرافی نوبیتکس، امکان خرید و فروش مستقیم دارایی را با قیمت لحظه بازار جهانی فراهم می‌کند.
با وجود قابلیت مبادله در صرافی، وابستگی به میزان عرضه و تقاضا در بازار داخلی نوبیتکس کاهش می‌یابد.</p>

<aside class="notice">
در حال حاضر، مانند بازار داخلی نوبیتکس، تبدیل رمزارزها در صرافی تنها در بازارهای ریالی و تتری امکان پذیر است.
</aside>

<aside class="notice">
احراز هویت در API های این مجموعه الزامی است.
</aside>
<h2 id='dd0b697e3e'>تخمین قیمت معامله</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/exchange/estimate'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"type": "sell", "srcCurrency": "BTC", "dstCurrency": "USDT", "amount": "0.01"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/exchange/estimate</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sell</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">srcCurrency</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BTC</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">dstCurrency</span><span class="p">:</span> <span class="dl">'</span><span class="s1">USDT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">amount</span><span class="p">:</span> <span class="dl">'</span><span class="s1">0.01</span><span class="dl">'</span><span class="p">,</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token yourTOKENhereHEX0000000000</span><span class="dl">'</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@FormUrlEncoded</span>
  <span class="nd">@POST</span><span class="o">(</span><span class="s">"/exchange/estimate"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">getExchangePriceEstimate</span><span class="o">(</span><span class="nd">@Field</span><span class="o">(</span><span class="s">"type"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nd">@Field</span><span class="o">(</span><span class="s">"srcCurrency"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">srcCurrency</span><span class="o">,</span> 
                                            <span class="nd">@Field</span><span class="o">(</span><span class="s">"dstCurrency"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">dstCurrency</span><span class="o">,</span> <span class="nd">@Field</span><span class="o">(</span><span class="s">"amount"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">amount</span><span class="o">);</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">getExchangePriceEstimate</span><span class="o">(</span><span class="s">"sell"</span><span class="o">,</span> <span class="s">"BTC"</span><span class="o">,</span> <span class="s">"USDT"</span><span class="o">,</span> <span class="s">"0.01"</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>POST /exchange/estimate HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
Content-Type: application/json
{"type": "sell", "srcCurrency": "BTC", "dstCurrency": "USDT", "amount": "0.01"}
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56707.59"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>برای دریافت قیمت تخمینی در صرافی متناسب با قیمت بازار جهانی و تخمین قیمت معامله از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>POST /exchange/estimate</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>الزامی</td>
<td>نوع معامله</td>
<td>&quot;sell&quot;</td>
</tr>
<tr>
<td>srcCurrency</td>
<td>string</td>
<td>الزامی</td>
<td>رمزارز مبدا</td>
<td>&quot;BTC&quot;</td>
</tr>
<tr>
<td>dstCurrency</td>
<td>string</td>
<td>الزامی</td>
<td>ارز مقصد</td>
<td>&quot;USDT&quot;</td>
</tr>
<tr>
<td>amount</td>
<td>monetary</td>
<td>اختیاری</td>
<td>مقدار رمزارز مورد معامله</td>
<td>&quot;0.01&quot;</td>
</tr>
</tbody></table>

<ol>
<li><strong>نوع معامله:</strong> دو مقدار <code>sell</code> برای فروش و <code>buy</code> برای خرید قابل قبول است.</li>
<li><strong>رمزارز مبدا:</strong> بایستی نماد یکی از رمزارزهای <code>BTC</code>، <code>ETH</code>، <code>LTC</code>، <code>XRP</code>، <code>BCH</code>، <code>BNB</code>، <code>EOS</code>، <code>DOGE</code>، <code>XLM</code>، <code>TRX</code>، <code>ETC</code>، <code>ADA</code>، <code>LINK</code>، <code>DAI</code>، <code>DOT</code>، <code>UNI</code>، <code>AAVE</code>، <code>GRT</code>، <code>ADA</code> و <code>SHIB</code> باشد.</li>
<li><strong>ارز مقصد:</strong> می‌تواند یکی از دو مقدار <code>RLS</code> و <code>USDT</code> باشد.</li>
</ol>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>price</td>
<td>monetary</td>
<td>قیمت تخمینی معامله</td>
<td>&quot;56707.59&quot;</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 30 درخواست در دقیقه
</aside>

<ul>
<li>حالت‌های خطا</li>
</ul>

<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>ParseError</td>
<td>نوع یا شرط الزامی بودن یکی از پارامترهای ورودی رعایت نشده است.</td>
</tr>
</tbody></table>
<h2 id='106c4fb05b'>ثبت معامله</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/exchange/create-trade'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"type": "sell", "srcCurrency": "BTC", "dstCurrency": "USDT", "amount": "0.01", "price": "56707.59"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/exchange/create-trade</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sell</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">srcCurrency</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BTC</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">dstCurrency</span><span class="p">:</span> <span class="dl">'</span><span class="s1">USDT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">amount</span><span class="p">:</span> <span class="dl">'</span><span class="s1">0.01</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">price</span><span class="p">:</span> <span class="dl">'</span><span class="s1">56707.59</span><span class="dl">'</span><span class="p">,</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token yourTOKENhereHEX0000000000</span><span class="dl">'</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@FormUrlEncoded</span>
  <span class="nd">@POST</span><span class="o">(</span><span class="s">"/exchange/create-trade"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">createExchangeTrade</span><span class="o">(</span><span class="nd">@Field</span><span class="o">(</span><span class="s">"type"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">type</span><span class="o">,</span> <span class="nd">@Field</span><span class="o">(</span><span class="s">"srcCurrency"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">srcCurrency</span><span class="o">,</span> 
                                       <span class="nd">@Field</span><span class="o">(</span><span class="s">"dstCurrency"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">dstCurrency</span><span class="o">,</span> <span class="nd">@Field</span><span class="o">(</span><span class="s">"amount"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">amount</span><span class="o">,</span>
                                       <span class="nd">@Field</span><span class="o">(</span><span class="s">"price"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">price</span><span class="o">);</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">createExchangeTrade</span><span class="o">(</span><span class="s">"sell"</span><span class="o">,</span> <span class="s">"BTC"</span><span class="o">,</span> <span class="s">"USDT"</span><span class="o">,</span> <span class="s">"0.01"</span><span class="o">,</span> <span class="s">"56707.59"</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>POST /exchange/create-trade HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
Content-Type: application/json
{"type": "sell", "srcCurrency": "BTC", "dstCurrency": "USDT", "amount": "0.01", "price": "56707.59"}
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-22T14:40:36.129372+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"isSell"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"srcCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitcoin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dstCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tether"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56718.32"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>برای ثبت معامله قیمت تخمینی دریافت شده از مرحله قبل و اطلاعات معامله را مطابق این درخواست ارسال نمایید:</p>

<ul>
<li><p>آدرس: <code>POST /exchange/create-trade</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>الزامی</td>
<td>نوع معامله</td>
<td>&quot;sell&quot;</td>
</tr>
<tr>
<td>srcCurrency</td>
<td>string</td>
<td>الزامی</td>
<td>رمزارز مبدا</td>
<td>&quot;BTC&quot;</td>
</tr>
<tr>
<td>dstCurrency</td>
<td>string</td>
<td>الزامی</td>
<td>ارز مقصد</td>
<td>&quot;USDT&quot;</td>
</tr>
<tr>
<td>amount</td>
<td>monetary</td>
<td>الزامی</td>
<td>مقدار رمزارز مورد معامله</td>
<td>&quot;0.01&quot;</td>
</tr>
<tr>
<td>price</td>
<td>monetary</td>
<td>الزامی</td>
<td>قیمت مورد انتظار واحد رمزارز</td>
<td>&quot;56707.59&quot;</td>
</tr>
</tbody></table>

<ol>
<li><strong>نوع معامله:</strong> دو مقدار <code>sell</code> برای فروش و <code>buy</code> برای خرید قابل قبول است.</li>
<li><strong>رمزارز مبدا:</strong> بایستی نماد یکی از رمزارزهای <code>BTC</code>، <code>ETH</code>، <code>LTC</code>، <code>XRP</code>، <code>BCH</code>، <code>BNB</code>، <code>EOS</code>، <code>DOGE</code>، <code>XLM</code>، <code>TRX</code>، <code>ETC</code>، <code>ADA</code>، <code>LINK</code>، <code>DAI</code>، <code>DOT</code>، <code>UNI</code>، <code>AAVE</code>، <code>GRT</code>، <code>ADA</code> و <code>SHIB</code> باشد.</li>
<li><strong>ارز مقصد:</strong> می‌تواند یکی از دو مقدار <code>IRT</code> و <code>USDT</code> باشد.</li>
</ol>

<aside class="notice">
ارزش معاملات ریالی بایستی بین 500,000 تومان تا 25,000,000 تومان باشد و ارزش معاملات تتری باید بین 20 تا 1000 تتر باشد.
</aside>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>trade</td>
<td>ExchangeTrade</td>
<td>معامله انجام شده</td>
<td>{&quot;id&quot;: 3, ...}</td>
</tr>
</tbody></table>
<h3 id='exchangetrade'>شی ExchangeTrade</h3>
<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>شناسه معامله</td>
<td>3</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت معامله</td>
<td>&quot;New&quot;</td>
</tr>
<tr>
<td>created_at</td>
<td>iso-string</td>
<td>زمان معامله</td>
<td>&quot;2021-11-22T14:40:36.129372+00:00&quot;</td>
</tr>
<tr>
<td>isSell</td>
<td>boolean</td>
<td>معامله خرید است؟</td>
<td>true</td>
</tr>
<tr>
<td>srcCurrency</td>
<td>string</td>
<td>رمزارز مبدا</td>
<td>&quot;Bitcoin&quot;</td>
</tr>
<tr>
<td>dstCurrency</td>
<td>string</td>
<td>ارز مقصد</td>
<td>&quot;Tether&quot;</td>
</tr>
<tr>
<td>amount</td>
<td>monetary</td>
<td>مقدار معامله</td>
<td>&quot;0.01&quot;</td>
</tr>
<tr>
<td>price</td>
<td>monetary</td>
<td>قیمت معامله</td>
<td>&quot;56718.32&quot;</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 10 درخواست در دقیقه
</aside>

<aside class="notice">
قیمت نهایی معامله ممکن است تا 1% نوسان نسبت به قیمت تخمین زده شده داشته باشد.
</aside>

<ul>
<li>حالت‌های خطا</li>
</ul>

<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>ExchangeTradeFailed</td>
<td>معامله انجام نشد.</td>
</tr>
<tr>
<td>ParseError</td>
<td>نوع یا شرط الزامی بودن یکی از پارامترهای ورودی رعایت نشده است.</td>
</tr>
</tbody></table>

<p><strong>دلایل عدم انجام معامله:</strong></p>

<ol>
<li>بازار درخواستی پشتیبانی نمی‌شود.</li>
<li>مقدار یا قیمت بسیار کم و نزدیک به صفر است.</li>
<li>قیمت مورد انتظار (قیمت در زمان تخمین) با قیمت لحظه‌ای بازار جهانی بیش از 1% اختلاف دارد.</li>
<li>ارزش ریالی / تتری معامله در محدوده مجاز نیست.</li>
</ol>
<h2 id='3fe8d57657'>لیست معاملات</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.nobitex.ir/exchange/trades-list'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/exchange/trades-list</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token yourTOKENhereHEX0000000000</span><span class="dl">'</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@GET</span><span class="o">(</span><span class="s">"/exchange/trades-list"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">listExchangeTrades</span><span class="o">();</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">listExchangeTrades</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>GET /exchange/trades-list HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Done"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-10-28T09:16:17.428375+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"isSell"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"srcCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitcoin"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"dstCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"﷼"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13498884000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0010000000"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Canceled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-13T11:34:40.781904+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"isSell"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"srcCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ethereum"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"dstCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"﷼"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"238000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-22T14:40:36.129372+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"isSell"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"srcCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitcoin"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"dstCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tether"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56718.32"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای دریافت لیست معاملات کاربر از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>GET /exchange/trades-list</code></p></li>
<li><p>پارامترهای پاسخ:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>trades</td>
<td>list of ExchangeTrade</td>
<td>لیست معاملات صرافی کاربر</td>
<td>[]</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 10 درخواست در دقیقه
</aside>

<aside class="notice">
دارای <a href="/#cb16a9b01c">صفحه‌بندی</a> / اندازه صفحه پیش‌فرض: 15
</aside>
<h1 id='f719db164f'>تراکنش‌های مالی</h1>
<p>هر گونه تغییر در موجودی کیف‌پول کاربر توسط یک تراکنش ایجاد و ثبت می‌شود. افزایش یا کسری موجودی در اثر واریز، برداشت، معامله و کارمزد همگی نمونه‌ای از تراکنش‌های مالی کاربر هستند.</p>

<aside class="notice">
احراز هویت در API های این مجموعه الزامی است.
</aside>
<h2 id='c0e10167ee'>تاریخچه تراکنش‌ها</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.nobitex.ir/users/transactions-history'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">api</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/users/transactions-history</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Token yourTOKENhereHEX0000000000</span><span class="dl">'</span><span class="p">},</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">APIService</span> <span class="o">{</span>
  <span class="nd">@Headers</span><span class="o">({</span><span class="s">"Authorization: Token yourTOKENhereHEX0000000000"</span><span class="o">})</span>
  <span class="nd">@GET</span><span class="o">(</span><span class="s">"/users/transactions-history"</span><span class="o">)</span>
  <span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="nf">listTransactions</span><span class="o">();</span>
<span class="o">}</span>

<span class="nc">APIService</span> <span class="n">api</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">APIService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="nc">Call</span><span class="o">&lt;</span><span class="nc">JsonObject</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">listTransactions</span><span class="o">();</span>
</code></pre></div><div class="highlight"><pre class="highlight swift tab-swift"><code><span class="c1">// Contact us</span>
</code></pre></div><div class="highlight"><pre class="highlight plaintext tab-plaintext"><code>GET /users/transactions-history HTTP/1.1
Host: api.nobitex.ir
Authorization: Token yourTOKENhereHEX0000000000
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"واریز"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-13T14:35:18.766Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rls"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000000.0000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000000.0000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"واریز شتابی - شماره کارت: 123456******1234 - شماره پیگیری: 39577-bpiZpZw"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"calculatedFee"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"معامله"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-23T15:47:12.835Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rls"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-8000000.0000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2000000.0000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"خرید 32.00 USDT به قیمت واحد ﷼250000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"calculatedFee"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"معامله"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-23T15:47:12.835Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32.0000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32.0000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"خرید 32.00 USDT به قیمت واحد ﷼250000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"calculatedFee"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"hasNext"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای دریافت تاریخچه همه تراکنش‌های مالی کاربر از این نوع درخواست استفاده نمایید:</p>

<ul>
<li><p>آدرس: <code>GET /users/transactions-history</code></p></li>
<li><p>پارامترهای پاسخ:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>ok</td>
</tr>
<tr>
<td>transactions</td>
<td>list of Transaction</td>
<td>لیستی از تراکنش‌ها</td>
<td>[]</td>
</tr>
<tr>
<td>hasNext</td>
<td>boolean</td>
<td>آیا لیست ادامه دارد؟</td>
<td>false</td>
</tr>
</tbody></table>

<p>شی Transaction</p>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>شناسه تراکنش</td>
<td>1</td>
</tr>
<tr>
<td>tp</td>
<td>string</td>
<td>نوع تراکنش</td>
<td>&quot;deposit&quot;</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>نوع قابل فهم</td>
<td>&quot;واریز&quot;</td>
</tr>
<tr>
<td>createdAt</td>
<td>iso-string</td>
<td>زمان ایجاد</td>
<td>&quot;2021-11-13T14:35:18.766Z&quot;</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>نوع ارز</td>
<td>&quot;rls&quot;</td>
</tr>
<tr>
<td>amount</td>
<td>monetary</td>
<td>مقدار</td>
<td>&quot;10000000.0000000000&quot;</td>
</tr>
<tr>
<td>balance</td>
<td>monetary</td>
<td>موجودی نهایی</td>
<td>&quot;10000000.0000000000&quot;</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>توضیحات</td>
<td>&quot;واریز شتابی - شماره کارت: 123456******1234 - شماره پیگیری: 39577-bpiZpZw&quot;</td>
</tr>
<tr>
<td>calculatedFee</td>
<td>monetary</td>
<td>کارمزد حساب شده</td>
<td>null</td>
</tr>
</tbody></table>

<ol>
<li><strong>نوع تراکنش:</strong> می‌تواند یکی از مقادیر <code>deposit</code> (واریز)، <code>withdraw</code> (برداشت)، <code>buy</code> و <code>sell</code> (معامله)، <code>fee</code> (کارمزد)، <code>gateway</code> (درگاه)، <code>ex_src</code> و <code>ex_dst</code> (صرافی) و <code>manual</code> (سیستمی) باشد.</li>
<li><strong>مقدار:</strong> در تراکنش مقدار منفی نشان‌دهنده کاهش موجودی و مقدار مثبت نشان‌دهنده افزایش موجودی می‌باشد.</li>
</ol>

<aside class="notice">
محدودیت فراخوانی : 60 درخواست در ساعت
</aside>

<aside class="notice">
دارای <a href="/#cb16a9b01c">صفحه‌بندی</a> / اندازه صفحه پیش‌فرض: 50
</aside>
<h1 id='591570d949'>گیفت کارت</h1>
<p>کارت هدیه‌ی نوبیتکس، امکان ارسال هدیه‌ به صورت فیزیکی و مجازی را به شخص دیگری فراهم می‌کند. فرایند دریافت هدیه نیز
می‌تواند به صورت داخلی و یا از نوع lightning باشد.
فرآیند کلی به این صورت هست که ابتدا کاربر درخواست خود را از طریق APIی ایجاد هدیه ثبت می‌کند و بعد از چک شدن محدودیت‌های برداشت کاربر شی هدیه ایجاد می‌شود. در این قسمت کاربر می‌تواند نوع هدیه که فیزیکی یا مجازی بودنش و همینطور نوع دریافت که به صورت برداشت داخلی و یا lightningای باشد را انتخاب کند.
مرحله‌ی بعد تایید برداشت ابتدایی هدیه است که در این گام از APIی تایید برداشت معمول استفاده می‌شود و فرآیند ایجاد هدیه تکمیل می‌شود.
گام بعد برای دریافت هدیه دریافت اطلاعات مربوط به هدیه از طریق api لندینگ هدیه است که اگر کاربر فرستنده شماره همراه گیرنده را وارد کرده باشد در این مرحله رمزیکبار مصرف برای کاربر ارسال می‌شود.
در نهایت گیرنده با وارد کردن رمزعبوری که گیرنده برای او مشخص کرده و رمز یکبار مصرف (در صورت ارسال) قادر به دریافت هدیه در APIی دریافت هدیه است.
اگر هدیه از نوع برداشت داخلی باشد برداشت به حساب گیرنده که حتما باید عضو نوبیتکس باشد زده می‌شود.
در غیر این صورت در پاسخ lnurl مربوط به هدیه در پاسخ فرستاده می‌شود.
لازم به ذکر است در صورتی که نوع دریافت lightning باشد گیرنده می‌تواند عضو نوبیتکس نباشد و در این حالت از APIی دریافت هدیه برای کاربران غیر عضو استفاده می‌شود که در صورت صحت اطلاعات ورودی پاسخ lnurl مربوط به هدیه است.
برای هر نوع از دریافت هدیه گیرنده می‌تواند کاربر نوبیتکس نباشد و قبل از دریافت هدیه عضو شود.
از آنجایی در حالت دریافت lightning دریافت کننده می‌تواند کاربر نوبیتکس نباشد برای بعضی از APIهای این مجموعه احراز هویت الزامی نیست.</p>
<h2 id='ad0b7a2c5e'>ایجاد هدیه</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/gift/create-gift'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'X-TOTP: 2568148'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data</span> <span class="s1">'{
    "amount": 0.02,
    "currency": "bnb",
    "gift_type": "digital",
    "package_type": "default",
    "mobile": "09127759318",
    "gift_sentence": "تقدیم به شما",
    "receiver_address": "iran-tehran",
    "receiver_postal_code": "3348-8841",
    "card_design": "default",
    "password": "testpass123",
    "redeem_type": "internal",
    "redeem_date": "2023-11-12",
    "receiver_full_name": "ali karimi"
}'</span>
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"gift_withdraw_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">158</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cost"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای ایجاد هدیه‌ی باید از درخواست با مشخصات زیر استفاده نمایید:
لازم به ذکر است برای فراخوانی این API کاربر باید لاگین باشد. همینطور در صورت انتخاب نوع هدیه‌ی فیزیکی آدرس و کد پستی گیرنده الزامی است.
مرحله‌ی بعد برای ایجاد هدیه و تکمیل فرآیند هدیه فراخوانی تایید برداشت هدیه است و پس از فراخوانی موفق تایید برداشت فرآیند ایجاد هدیه تکمیل خواهد شد. </p>

<aside class="notice">
مقادیر مورد قبول برای نوع هدیه:
1- digital 
2- physical
خواهند بود.
</aside>

<aside class="notice">
مقادیر مورد قبول برای نوع دریافت هدیه:
1- internal 
2- lightning
خواهند بود.
</aside>

<aside class="notice">
مقادیر مورد قبول برای طرح کارت:
1- grand 
2- mind
3- cute
2- light
خواهند بود.
</aside>

<aside class="notice">
مقادیر مورد قبول حال حاضر برای نوع پکیج:
1- default 
خواهند بود.
</aside>

<ul>
<li><p>آدرس: <code>POST /gift/create-gift</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>monetary</td>
<td>الزامی</td>
<td>مقدار رمزارز</td>
<td>&quot;0.02&quot;</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>الزامی</td>
<td>رمزارز</td>
<td>&quot;BTC&quot;</td>
</tr>
<tr>
<td>mobile</td>
<td>string</td>
<td>اختیاری</td>
<td>همراه گیرنده</td>
<td>&quot;9127774565&quot;</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>اختیاری</td>
<td>ایمیل گیرنده</td>
<td>&quot;test@gmail.com&quot;</td>
</tr>
<tr>
<td>gift_type</td>
<td>string</td>
<td>الزامی</td>
<td>نوع هدیه</td>
<td>&quot;pyshical&quot;</td>
</tr>
<tr>
<td>gift_sentence</td>
<td>string</td>
<td>الزامی</td>
<td>جمله برای گیرنده</td>
<td>&quot;تقدیم به شما&quot;</td>
</tr>
<tr>
<td>package_type</td>
<td>string</td>
<td>اختیاری</td>
<td>نوع پکیج</td>
<td>&quot;default&quot;</td>
</tr>
<tr>
<td>receiver_address</td>
<td>string</td>
<td>اختیاری</td>
<td>آدرس گیرنده</td>
<td>&quot;iran-tehran&quot;</td>
</tr>
<tr>
<td>receiver_postal_code</td>
<td>string</td>
<td>اختیاری</td>
<td>کد پستی گیرنده</td>
<td>&quot;3354-7721&quot;</td>
</tr>
<tr>
<td>receiver_full_name</td>
<td>string</td>
<td>الزامی</td>
<td>نام و نام خانوادگی گیرنده</td>
<td>&quot;masoud mohamadi&quot;</td>
</tr>
<tr>
<td>card_design</td>
<td>string</td>
<td>الزامی</td>
<td>طرح کارت</td>
<td>&quot;default&quot;</td>
</tr>
<tr>
<td>redeem_date</td>
<td>iso-string</td>
<td>اختیاری</td>
<td>تاریخ دریافت</td>
<td>&quot;2022-09-17&quot;</td>
</tr>
<tr>
<td>redeem_type</td>
<td>string</td>
<td>الزامی</td>
<td>نوع دریافت</td>
<td>&quot;lightning&quot;</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>الزامی</td>
<td>گذرواژه‌ی گیرنده</td>
<td>&quot;testpass123&quot;</td>
</tr>
</tbody></table>
<h3 id='eec2b3e8e4'>حالت‌های خطا</h3>
<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>ValidationError</td>
<td>وارد نشدن آدرس و کد پستی در صورت انتخاب نوع هدیه‌ی فیزیکی</td>
</tr>
<tr>
<td>ValidationError</td>
<td>در صورت وارد شدن تاریخ مربوط به گذشته</td>
</tr>
<tr>
<td>InvalidAmount</td>
<td>مقدار وارد شده برای مقادیر ثابت ریالی جز مقادیر در نظر گرفته شده نباشد</td>
</tr>
<tr>
<td>InvalidRequest</td>
<td>ایمیل وارد شده ایمیل درخواست دهنده باشد در حالت دیجیتال</td>
</tr>
<tr>
<td>PleaseEnable2FA</td>
<td>سطح کاربر بالاتر از ۲ باشد و درخواست ریالی نباشد و دوعاملی کاربر فعال نشده باشد</td>
</tr>
<tr>
<td>Invalid2FA</td>
<td>دوعاملی کاربر فعال باشد و رمزیکبار مصرف اشتباه وارد شده باشد</td>
</tr>
<tr>
<td>WithdrawUnavailable</td>
<td>در صورتی که کاربر محدودیت برداشت داشته باشد و مجوز برداشتی برای او تعریف نشده باشد</td>
</tr>
<tr>
<td>WithdrawAmountLimitation</td>
<td>در صورتی که کاربر سقف برداشت مجازش را برای رمزارز مشخصی رد کرده باشد</td>
</tr>
<tr>
<td>WithdrawLimitReached</td>
<td>در صورتی که کاربر از سقف تعداد برداشتش عبور کرده باشد</td>
</tr>
<tr>
<td>WithdrawCurrencyUnavailable</td>
<td>در صورتی که برداشت از رمزارز درخواست شده امکان پذیر نباشد</td>
</tr>
<tr>
<td>WithdrawDisabled</td>
<td>در صورتی که برداشت برای رمزارزی موقتی بسته باشد</td>
</tr>
<tr>
<td>InsufficientBalance</td>
<td>در صورتی که کاربر مقدار بالانس مورد نیاز برای هزینه‌ی صدور کارت فیزیکی را نداشته باشد</td>
</tr>
<tr>
<td>InsufficientBalance</td>
<td>در صورتی که مقدار درخواستی کاربر از مقدار بالانسش بیشتر باشد</td>
</tr>
<tr>
<td>AmountTooLow</td>
<td>اگر مقدار درخواستی کاربر کمتر از حداقل مقدار برداشت رمزارز مورد نظر باشد</td>
</tr>
<tr>
<td>AmountTooHigh</td>
<td>اگر مقدار درخواستی کاربر بیشتر از حداکثر مقدار برداشت رمزارز مورد نظر باشد</td>
</tr>
<tr>
<td>InvalidMobileNumber</td>
<td>اگر کاربر موبایل تایید شده نداشته باشد</td>
</tr>
<tr>
<td>InsufficientBalance</td>
<td>در صورتی که تراکنش برای کسر هزینه‌ی صدور کارت فیزیکی موفقیت آمیز نباشد</td>
</tr>
</tbody></table>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>created</td>
</tr>
<tr>
<td>gift_withdraw_id</td>
<td>integer</td>
<td>شناسه‌ی برداشت</td>
<td>159</td>
</tr>
<tr>
<td>cost</td>
<td>monetary</td>
<td>هزینه‌ی ایجاد هدیه‌</td>
<td>&quot;100&quot;</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 10 درخواست در دقیقه
</aside>

<aside class="notice">
آرگومان مورد نیاز برای فراخوانی APIی تایید برداشت در پاسخ این APIی موجود است و مقدار gift_withdraw_id است.
</aside>

<aside class="notice">
در صورتی که نوع هدیه دیجیتال باشد ارسال ایمیل گیرنده الزامی خواهد بود.
</aside>
<h2 id='1ecce8f7b9'>تایید برداشت</h2>
<p>برای این منظور باید از APIی تایید درخواست برداشت در قسمت برداشت استفاده کرد.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/users/wallets/withdraw-confirm'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"withdraw": 432, "otp": 623005}'</span>
</code></pre></div>
<ul>
<li><strong>درخواست:</strong> <code>POST /users/wallets/withdraw-confirm</code></li>
</ul>

<aside class="notice">
که مقدار withdraw را در این درخواست باید برابر مقدار gift_withdraw_id از پاسخ API ایجاد هدیه قرار داد.
</aside>
<h2 id='56e3cb5859'>لندینگ هدیه</h2>
<p>کاربر بعد از اسکن کد هدیه‌ی خود به این صفحه انتقال داده می‌شود. که در انتهای مسیر این API کد هدیه‌ی کاربر قرار دارد.
لازم به ذکر است در صورتی که کاربر فرستنده، شماره موبایل کاربر گیرنده را وارد کرده باشد رمز یکبار مصرف در این مرحله برای کاربر فرستاده خواهد شد.</p>

<ul>
<li>آدرس: <code>GET /gift/&lt;redeem-code&gt;</code></li>
</ul>
<h3 id='eec2b3e8e4-2'>حالت‌های خطا</h3>
<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>InvalidRedeemCode</td>
<td>در صورتی که کد وارد شده نامعتبر باشد</td>
</tr>
</tbody></table>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>redeem_code</td>
<td>string</td>
<td>کد هدیه‌ي کاربر</td>
<td>&quot;FB57379C&quot;</td>
</tr>
<tr>
<td>card_design</td>
<td>string</td>
<td>طرح کارت</td>
<td>&quot;default&quot;</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>رمزارز</td>
<td>&quot;bnb&quot;</td>
</tr>
<tr>
<td>amount</td>
<td>monetary</td>
<td>مقدار رمزارز</td>
<td>&quot;0.02&quot;</td>
</tr>
<tr>
<td>mobile_provided</td>
<td>boolean</td>
<td>اینکه فرستنده شماره همراه گیرنده را ارسال کرده یا خیر</td>
<td>true</td>
</tr>
<tr>
<td>sentence</td>
<td>string</td>
<td>جمله‌ی هدیه</td>
<td>&quot;تقدیم به شما&quot;</td>
</tr>
<tr>
<td>redeem_type</td>
<td>string</td>
<td>نوع دریافت هدیه</td>
<td>&quot;lightning&quot;</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 5 درخواست در ۱ ساعت
</aside>
<h2 id='3d9594a87d'>دریافت هدیه‌ برای کاربران عضو</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/gift/redeem'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Token yourTOKENhereHEX0000000000'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data</span> <span class="s1">'{
    "redeem_code": "30BBBBCA",
    "password": "testpass123",
    "otp": "813846"
}'</span>
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به حالتی که دریافت به صورت lightning این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lnUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnurlZX6N..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به حالتی که دریافت داخلی باشد، به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>برای دریافت هدیه‌ی کاربری که عضو نوبیتکس است، فارق از نوع دریافت این API فراخوانی شود.
در این قسمت با توجه به نوع دریافت هدیه‌ی کاربر پاسخ متفاوت فرستاده خواهد شد.
اگر نوع دریافت به صورت داخلی انتخاب شده باشد بعد از بررسی صحت اطلاعات ورودی صرفا پاسخ موفقیت فرستاده خواهد شد.
در صورتی که نوع دریافت lightning باشد در پاسخ lnurl مربوط به هدیه فرستاده خواهد شد.
<aside class="notice">
آرگومان otp در این API اختیاری است زمانی نیاز به ارسال است که در پاسخ لندینگ مقدار mobile_provided صحیح (true) باشد.
</aside>
<aside class="notice">
در این مرحله برای امنیت بیشتر کاربران ارسال کپچا اجباری است.
</aside></p>

<ul>
<li><p>آدرس: <code>POST /gift/redeem</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>redeem_code</td>
<td>string</td>
<td>الزامی</td>
<td>کد هدیه</td>
<td>&quot;FB57379C&quot;</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>الزامی</td>
<td>گذرواژه‌ی هدیه</td>
<td>&quot;testpass123&quot;</td>
</tr>
<tr>
<td>otp</td>
<td>string</td>
<td>اختیاری</td>
<td>رمزیکبار مصرف ارسال شده به کاربر</td>
<td>&quot;564785&quot;</td>
</tr>
<tr>
<td>key</td>
<td>string</td>
<td>اختیاری</td>
<td>رمزیکبار مصرف ارسال شده به کاربر</td>
<td>&quot;564785&quot;</td>
</tr>
<tr>
<td>captcha</td>
<td>string</td>
<td>اختیاری</td>
<td>رمزیکبار مصرف ارسال شده به کاربر</td>
<td>&quot;564785&quot;</td>
</tr>
<tr>
<td>client</td>
<td>string</td>
<td>اختیاری</td>
<td>رمزیکبار مصرف ارسال شده به کاربر</td>
<td>&quot;564785&quot;</td>
</tr>
</tbody></table>
<h3 id='eec2b3e8e4-3'>حالت‌های خطا</h3>
<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>InvalidCaptcha</td>
<td>در صورت اشتباه وارد شدن کپچا</td>
</tr>
<tr>
<td>InvalidOTP</td>
<td>اگر رمزیکبار مصرف ارسال شده به گوشی کاربر اشتباه وارد شده باشد</td>
</tr>
<tr>
<td>InvalidPassword</td>
<td>اگر پین یا رمزعبور مشخص شده برای گیرند‌ه‌ی هدیه اشتباه وارد شده باشد</td>
</tr>
<tr>
<td>CardIsCanceled</td>
<td>اگر وضعیت هدیه کنسل شده باشد</td>
</tr>
<tr>
<td>AlreadyRedeemedOrCanceled</td>
<td>اگر هدیه داخلی باشد و وضعیت قابل ریدیم کردن نداشته باشد</td>
</tr>
<tr>
<td>InvalidInitialWithdraw</td>
<td>در صورتی که برداشت اولیه مربوط به هدیه موفق نبوده باشد</td>
</tr>
<tr>
<td>LnurlUnavailable</td>
<td>در صورتی که نوع کارت لایتنینگی باشد و مشکلی در دریافت lnurl باشد</td>
</tr>
<tr>
<td>InternalWithdrawFailed</td>
<td>در صورتی که نوع کارت داخلی باشد و برداشت به ولت گیرنده موفق نباشد</td>
</tr>
</tbody></table>

<aside class="notice">
در صورتی که کاربر ایجاده کننده‌ی هدیه شماره همراه کاربر گیرنده را وارد کرده باشد،‌ به این معناست که نحوه‌ی دریافت هدیه به‌صورت دوعاملی هست. 
</aside>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<aside class="notice">
در حالتی که نوع برداشت داخلی باشد:
</aside>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>&quot;ok&quot;</td>
</tr>
</tbody></table>

<aside class="notice">
در حالتی که نوع برداشت lightning باشد:
</aside>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>&quot;ok&quot;</td>
</tr>
<tr>
<td>lnUrl</td>
<td>string</td>
<td>هدیه lnurl</td>
<td>&quot;lnurlZX6N...&quot;</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 5 درخواست در ۱ ساعت
</aside>
<h2 id='lightning'>دریافت هدیه‌ی lightning برای کاربران غیر عضو</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/gift/redeem-lightning'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data</span> <span class="s1">'{
    "redeem_code": "8AFA1DF3",
    "password": "testpass123",
    "otp": "158354"
}'</span>
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ در حالت کلی، این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lnUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnurlPURQEQ..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>در صورتی که کاربری عضو نوبیتکس نباشد و نوع هدیه نیز lightning باشد باید از این API برای دریافت هدیه استفاده شود.
این API فقط برای دریافت هدایا از نوع دریافت lightning و زمانی که گیرنده عضو نوبیتکس نباشد استفاده می‌شود.</p>

<aside class="notice">
در این مرحله برای امنیت بیشتر کاربران ارسال کپچا اجباری است.
</aside>

<ul>
<li><p>آدرس: <code>POST /gift/redeem-lightning</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>redeem_code</td>
<td>string</td>
<td>الزامی</td>
<td>کد هدیه</td>
<td>&quot;FB57379C&quot;</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>الزامی</td>
<td>گذرواژه‌ی هدیه</td>
<td>&quot;testpass123&quot;</td>
</tr>
<tr>
<td>otp</td>
<td>string</td>
<td>اختیاری</td>
<td>رمزیکبار مصرف ارسال شده به کاربر</td>
<td>&quot;254862&quot;</td>
</tr>
</tbody></table>
<h3 id='eec2b3e8e4-4'>حالت‌های خطا</h3>
<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>InvalidCaptcha</td>
<td>در صورت اشتباه وارد شدن کپچا</td>
</tr>
<tr>
<td>InvalidOTP</td>
<td>اگر رمزیکبار مصرف ارسال شده به گوشی کاربر اشتباه وارد شده باشد</td>
</tr>
<tr>
<td>InvalidPassword</td>
<td>اگر پین یا رمزعبور مشخص شده برای گیرند‌ه‌ی هدیه اشتباه وارد شده باشد</td>
</tr>
<tr>
<td>CardIsCanceled</td>
<td>اگر وضعیت هدیه کنسل شده باشد</td>
</tr>
<tr>
<td>InvalidRequest</td>
<td>اگر نوع دریافت هدیه لایتنینگ نباشد</td>
</tr>
<tr>
<td>InvalidInitialWithdraw</td>
<td>در صورتی که برداشت اولیه مربوط به هدیه موفق نبوده باشد</td>
</tr>
<tr>
<td>LnurlUnavailable</td>
<td>در صورتی که نوع کارت لایتنینگی باشد و مشکلی در دریافت lnurl باشد</td>
</tr>
</tbody></table>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>&quot;ok&quot;</td>
</tr>
<tr>
<td>lnUrl</td>
<td>string</td>
<td>هدیه lnurl</td>
<td>&quot;lnurlZX6N...&quot;</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 5 درخواست در ۱ ساعت
</aside>

<aside class="notice">
در این API نیاز به توکن وجود ندازد.
</aside>

<aside class="notice">
در صورتی که موبایل گیرنده از طرف کاربر گیرنده ارسال شده باشد مقدار otp باید وارد شود.
</aside>
<h2 id='f62370d40a'>لیست کارت‌های هدیه‌ی کاربر</h2>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sent_gift_cards"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w">
            </span><span class="nl">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"masoud mohamadi"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iran-tehran"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mobile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"09127842542"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3579-4123"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"package_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"redeem_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EF9472B7"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"gift_sentence"</span><span class="p">:</span><span class="w"> </span><span class="s2">"تقدیم به شما"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@gmail.com"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"receiver"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bnb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"gift_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Digital"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"gift_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Redeemed"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"card_design"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Default"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-13T11:42:27.338380+00:00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"redeem_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-11-11T20:30:00+00:00"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"received_gift_cards"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w">
            </span><span class="nl">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mohsen amini"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iran-tehran"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mobile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"09125412335"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8568-9982"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"package_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"redeem_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"D758A8A2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"gift_sentence"</span><span class="p">:</span><span class="w"> </span><span class="s2">"جمله‌ی تست هدیه"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.05"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@gmail.com"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"receiver"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new_user@gmail.com"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bnb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"gift_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Digital"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"gift_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Redeemed"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"card_design"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Default"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-10T12:33:08.226370+00:00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"redeem_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-11-11T20:30:00+00:00"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>این API برای نمایش تمامی هدایای فرستاده شده و یا دریافت شده‌ی کاربر استفاده می‌شود.
در صورتی که کاربر گیرنده عضو نوبیتکس نباشه ایمیل و یا نام و نام خانوادگی مقدار receiver خواهند بود.</p>

<ul>
<li><p>آدرس: <code>GET /gift/user-gifts</code></p></li>
<li><p>پارامترهای پاسخ:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>&quot;ok&quot;</td>
</tr>
<tr>
<td>sent_gift_cards</td>
<td>list of user sent gifts</td>
<td>لیست هدایای فرستاده شده‌ی کاربر</td>
<td>[]</td>
</tr>
<tr>
<td>received_gift_cards</td>
<td>list of user received gifts</td>
<td>لیست هدایای گرفته شده‌ی کاربر</td>
<td>[]</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 60 درخواست در دقیقه
</aside>
<h2 id='d6f322bb99'>ایجاد درخواست تعداد بالای هدیه</h2>
<p>در صورتی که کاربری درخواست برای تعداد بالای هدیه داشته باشد باید این API فراخوانی شود که درخواست کاربر ثبت شود.
برای این درخواست نیاز به ارسال پارامتر ورودی نیست و فقط کاربر درخواست کننده باید لاگین باشد.
در پاسخ شناسه‌ی درخواست ساخته شده نیز فرستاده می‌شود که باید در درخواست مربوط به تایید درخواست‌ هدیه‌ی دسته‌ای ارسال شود.</p>

<ul>
<li><p>آدرس: <code>POST /gift/create-gift-batch</code></p></li>
<li><p>پارامترهای پاسخ:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>&quot;created&quot;</td>
</tr>
<tr>
<td>batch_id</td>
<td>integer</td>
<td>شناسه‌ی درخواست دسته‌ای</td>
<td>58</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 10 درخواست در ساعت
</aside>
<h2 id='aa1c6bb46c'>تایید درخواست تعداد بالای هدیه</h2>
<p>برای ارسال رمزیکبار مصرف فرستاده شده به کاربر برای تایید ایجاد تعداد بالای هدیه باید از این API استفاده شود.
مقادیر ورودی رمزیکبار مصرف و شناسه‌ی درخواست ایجاد شده هستند.</p>

<ul>
<li><p>آدرس: <code>POST /gift/confirm-gift-batch</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>otp</td>
<td>string</td>
<td>اجباری</td>
<td>رمزیکبار مصرف ارسال شده به کاربر</td>
<td>&quot;615519&quot;</td>
</tr>
<tr>
<td>batch_id</td>
<td>string</td>
<td>اجباری</td>
<td>شناسه‌ی درخواست ایجاد شده</td>
<td>58</td>
</tr>
</tbody></table>
<h3 id='eec2b3e8e4-5'>حالت‌های خطا</h3>
<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>InvalidOTP</td>
<td>در صورتی که رمزیکبار مصرف تایید برای ایجاد و تایید درخواست هدیه‌ی دسته‌ای اشتباه باشد</td>
</tr>
</tbody></table>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>&quot;ok&quot;</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 10 درخواست در دقیقه
</aside>
<h2 id='3ff731b9c9'>ارسال مجدد رمزیکبار مصرف</h2>
<blockquote>
<p>نمونه درخواست:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s1">'https://api.nobitex.ir/gift/resend-gift-otp'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data</span> <span class="s1">'{
    "redeem_code": "07DB85D7210E4D29AEFF112FF53B2C74"
}'</span>
</code></pre></div>
<blockquote>
<p>در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>در صورت نیاز به ارسال مجدد رمز یکبار مصرف برای دریافت هدیه این API فراخوانی می‌شود.</p>

<ul>
<li><p>آدرس: <code>POST /gift/resend-gift-otp</code></p></li>
<li><p>پارامترهای ورودی:</p></li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>پیش‌فرض</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>redeem_code</td>
<td>string</td>
<td>الزامی</td>
<td>کد هدیه</td>
<td>&quot;07DB85D7210E4D29AEFF112FF53B2C74&quot;</td>
</tr>
</tbody></table>
<h3 id='eec2b3e8e4-6'>حالت‌های خطا</h3>
<table><thead>
<tr>
<th>کد خطا</th>
<th>توضیحات</th>
</tr>
</thead><tbody>
<tr>
<td>MobileNotProvided</td>
<td>اگر موبایل گیرنده وجود نداشته باشد</td>
</tr>
<tr>
<td>TooManyRequests</td>
<td>اگر تعداد پیامک‌های ارسالی برای در ۱۲ ساعت گذشته بیشتر از تعداد مجاز ۷ عدد باشد</td>
</tr>
</tbody></table>

<ul>
<li>پارامترهای پاسخ:</li>
</ul>

<table><thead>
<tr>
<th>پارامتر</th>
<th>نوع</th>
<th>توضیحات</th>
<th>نمونه</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>وضعیت پاسخ</td>
<td>&quot;ok&quot;</td>
</tr>
</tbody></table>

<aside class="notice">
محدودیت فراخوانی : 5 درخواست در ساعت
</aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="swift">swift</a>
                <a href="#" data-language-name="plaintext">plaintext</a>
          </div>
      </div>
    </div>
  </body>
</html>
